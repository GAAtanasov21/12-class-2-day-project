{% extends "base.html" %}

{% block content %}
<h2>All Orders</h2>

{% if orders %}
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>User</th>
        <th>Total</th>
        <th>Address</th>
        <th>Payment</th>
        <th>Date</th>
        <th>Items</th>
      </tr>
    </thead>
    <tbody>
      {% for o in orders %}
      <tr>
        <td>{{ o.id }}</td>
        <td>{{ o.user_email }}</td>
        <td>${{ '%.2f'|format(o.total) }}</td>
        <td>{{ o.address }}</td>
        <td>{{ o.payment_method }}</td>
        <td>{{ o.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
        <td>
          <ul>
            {% for item in o.items %}
              <li>{{ item.product.name }} ({{ item.size }}) x{{ item.quantity }} = ${{ '%.2f'|format(item.subtotal) }}</li>
            {% endfor %}
          </ul>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p>No orders yet.</p>
{% endif %}
{% endblock %}
